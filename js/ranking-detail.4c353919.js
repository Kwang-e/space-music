(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ranking-detail"],{"0a17":function(t,a,s){t.exports=s.p+"img/search.403f1f98.svg"},1634:function(t,a,s){"use strict";var e=function(){var t,a=this,s=a.$createElement,e=a._self._c||s;return e("label",{staticClass:"corner-label",class:(t={},t[a.size]=a.size,t)},[a._t("default"),e("i",{staticClass:"cor cor1"}),e("i",{staticClass:"cor cor2"}),e("i",{staticClass:"cor cor3"}),e("i",{staticClass:"cor cor4"})],2)},n=[],i={name:"CornerLabel",props:{size:{type:String,default:"sm"}}},r=i,c=(s("3912"),s("2877")),l=Object(c["a"])(r,e,n,!1,null,"37649290",null);a["a"]=l.exports},"188f":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"items"},t._l(t.list,(function(a,n){return e("li",{key:n,staticClass:"item",on:{click:function(s){return t.$emit("item-route",{id:a.id,type:t.type})}}},["ranking"==t.type?e("span",{staticClass:"ranking",class:{top3:n<3}},[t._v(" "+t._s((""+(n+1)).padStart(t.list.length.toString().length,0))+" ")]):t._e(),e("span",{staticClass:"thumb",class:{album:"new-albums"==t.type,hide:"search-list"==t.type},style:{backgroundImage:"url("+("new-albums"==t.type?a.picUrl:a.album&&a.album.picUrl||a.album.artist&&a.album.artist.img1v1Url||t.defArtImg)+"?param=120y120)"}}),e("span",{staticClass:"infos"},[e("div",{staticClass:"name"},["new-albums"==t.type?e("label",{staticClass:"size"},[e("img",{attrs:{src:s("b2b8")}}),t._v(t._s(a.size))]):t._e(),t._v(" "+t._s(a.name)+" "),a.alias&&a.alias.length?e("label",{staticClass:"alias"},[t._v("("+t._s(t.alias(a.alias))+")")]):t._e()]),e("div",{staticClass:"names"},[t._v(" "+t._s(1==a.artists.length?"new-albums"==t.type?a.artist.name:a.artists[0].name:a.artists.reduce((function(t,s,e){return t+(s.name+(a.artists.length!=e+1?" / ":""))}),""))+" ")])]),a.duration?e("span",{staticClass:"duration"},[t._v(t._s(t.formatSeconds(a.duration,1e3)))]):t._e()])})),0)},n=[],i=s("1d30"),r=s("182a"),c=s("5fb0"),l={name:"Items",props:{type:{type:String},list:{type:Array,default:function(){return[]}}},data:function(){return{defArtImg:c["a"]}},methods:{alias:i["a"],formatSeconds:r["a"]}},o=l,u=(s("b2dd"),s("2877")),d=Object(u["a"])(o,e,n,!1,null,"37ef9466",null);a["a"]=d.exports},"19eb":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("label",{ref:"cornerTip",staticClass:"corner-tip"},[s("label",{staticClass:"bg",attrs:{"data-tip":t.text}},[s("label",{staticClass:"tt"},[t._v(t._s(t.text))])])])},n=[],i={name:"CornerTip",props:["text"],mounted:function(){var t=this.$refs.cornerTip.children[0],a=t.children[0],s=a.clientWidth>37?a.clientWidth:37;t.style.borderWidth=s+"px",t.style.top=t.style.right=-s+"px",a.style.transform="translate(-0.7rem, ".concat(s/2,"px)")}},r=i,c=(s("c31e"),s("2877")),l=Object(c["a"])(r,e,n,!1,null,"06c15408",null);a["a"]=l.exports},3912:function(t,a,s){"use strict";var e=s("fafb"),n=s.n(e);n.a},4296:function(t,a,s){},"4cb2":function(t,a,s){},"5fb0":function(t,a,s){"use strict";s.d(a,"a",(function(){return e}));var e="https://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg"},"5fe0":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"ranking-detail"},[s("app-top"),s("back",{on:{back:t.handleBack}}),s("div",{staticClass:"logo-pos"},[s("logo")],1),s("search-button"),s("corner-label",{attrs:{size:"md"}},[s("corner-tip",{attrs:{text:"榜单"}}),s("div",{staticClass:"basic"},[s("img",{staticClass:"cover",attrs:{src:t.ranking.coverImgUrl+"?param=250y250"},on:{click:function(a){t.show=!0}}}),s("span",[s("h2",{staticClass:"name"},[t._v(t._s(t.ranking.name))]),s("p",{staticClass:"creator"},[s("img",{staticClass:"avatar",attrs:{src:t.ranking.creator.avatarUrl+"?param=80y80"},on:{click:function(a){return t.handleUser(t.ranking.creator.userId)}}}),s("label",{staticClass:"nickname",on:{click:function(a){return t.handleUser(t.ranking.creator.userId)}}},[t._v(t._s(t.ranking.creator.nickname))]),t.ranking.creator.experts?s("label",{staticClass:"expert"},[t._v("EXP")]):t._e(),t.ranking.creator.vipType?s("label",{staticClass:"vip"},[t._v("VIP")]):t._e()]),s("p",[s("label",{staticClass:"pk"},[t._v("更新时间：")]),s("label",{staticClass:"pv"},[t._v(t._s(t.datetime(t.ranking.updateTime,!0)))])])])]),s("div",{staticClass:"statistic"},[s("span",{staticClass:"count"},[s("label",{staticClass:"name"},[t._v("歌曲")]),s("label",{staticClass:"num"},[t._v(t._s(t.count(t.ranking.trackCount)))])]),s("span",{staticClass:"count"},[s("label",{staticClass:"name"},[t._v("播放")]),s("label",{staticClass:"num"},[t._v(t._s(t.count(t.ranking.playCount)))])]),s("span",{staticClass:"count"},[s("label",{staticClass:"name"},[t._v("分享")]),s("label",{staticClass:"num"},[t._v(t._s(t.count(t.ranking.shareCount)))])]),s("span",{staticClass:"count"},[s("label",{staticClass:"name"},[t._v("订阅")]),s("label",{staticClass:"num"},[t._v(t._s(t.count(t.ranking.subscribedCount)))])]),s("span",{staticClass:"count"},[s("label",{staticClass:"name"},[t._v("评论")]),s("label",{staticClass:"num"},[t._v(t._s(t.count(t.ranking.commentCount)))])])]),t.ranking.description?s("p",{ref:"desc",staticClass:"desc"},[s("label",[t._v("[ 榜单介绍 ]")]),t._v(t._s(t.ranking.description))]):s("p",{staticClass:"none"},[t._v("暂无介绍")]),s("div",{staticClass:"desc-btn",class:{show:t.descEl&&t.descEl.className.includes("overflow")},on:{click:function(a){t.descEl.className="desc",t.descEl=null}}},[t._v("展开")])],1),s("h3",{staticClass:"title"},[t._v("榜单歌曲"),s("i",{staticClass:"total"},[t._v("共"+t._s(t.ranking.tracks.length)+"首")])]),s("items",{attrs:{type:"ranking",list:t.ranking.tracks},on:{"item-route":t.handleItemRoute}}),t.show?s("photo",{attrs:{pre:t.ranking.coverImgUrl+"?param=250y250",url:t.ranking.coverImgUrl},on:{close:function(a){t.show=!1}}}):t._e()],1)},n=[],i=(s("d81d"),s("b0c0"),s("34b2")),r=s("66b7"),c=s("2241"),l=s("9f7a"),o=s("1634"),u=s("19eb"),d=s("188f"),f=s("7856"),p=s("9158"),m=s("d680"),h=s("5fb0"),v={name:"RankingDetail",components:{AppTop:i["a"],Back:r["a"],Logo:c["a"],SearchButton:l["a"],CornerLabel:o["a"],CornerTip:u["a"],Items:d["a"],Photo:f["a"]},data:function(){return{ranking:{creator:{},tracks:[]},descEl:null,show:!1}},methods:{init:function(){var t=this;this.$store.commit("setIsLoading",!0);var a=this.$route.params.id;this.$api.ranking.toplist(a).then((function(a){t.ranking=a.playlist,t.ranking.tracks=t.ranking.tracks.map((function(t){return{id:t.id,name:t.name,album:{picUrl:t.al.picUrl||h["a"]},alias:t.alia,artists:t.ar,duration:t.dt}})),t.setDescHeight(),t.$store.commit("setIsLoading",!1)}))},datetime:p["a"],count:m["a"],setDescHeight:function(){var t=this;this.$nextTick((function(){t.descEl=t.$refs.desc,t.descEl&&t.descEl.clientHeight>150&&(t.descEl.className+=" overflow")}))},handleBack:function(){history.back()},handleItemRoute:function(t){var a=t.id;this.$router.push({name:"songDetail",params:{id:a}})},handleUser:function(t){this.$router.push({name:"userDetail",params:{id:t}})}},created:function(){this.init()}},b=v,g=(s("e399"),s("2877")),_=Object(g["a"])(b,e,n,!1,null,"31cc9296",null);a["default"]=_.exports},"66b7":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"back",on:{click:function(a){return t.$emit("back")}}})},n=[],i={name:"Back"},r=i,c=(s("f114"),s("2877")),l=Object(c["a"])(r,e,n,!1,null,"2d086ee5",null);a["a"]=l.exports},6787:function(t,a,s){},"74ad":function(t,a,s){"use strict";var e=s("6787"),n=s.n(e);n.a},7856:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"photo",staticClass:"photo",on:{click:function(a){return t.$emit("close")}}},[s("div",{ref:"img",staticClass:"wrap"},[s("img",{staticClass:"preview",class:{hide:t.loaded},attrs:{src:t.pre}}),s("img",{class:{hide:!t.loaded},attrs:{src:t.url},on:{load:t.handleLoaded}})])])},n=[],i={name:"Photo",props:["pre","url"],data:function(){return{loaded:!1}},methods:{ready:function(){this.fixScroll(this.$refs.photo,this.$refs.img)},handleLoaded:function(){this.loaded=!0},fixScroll:function(t,a){var s,e=function(t){t.addEventListener("touchstart",(function(t){s=Math.floor(t.targetTouches[0].clientY)})),t.addEventListener("touchmove",(function(a){var e=Math.floor(a.targetTouches[0].clientY),n=t.scrollTop,i=t.scrollHeight,r=t.clientHeight;n<=0&&e-s>0?a.preventDefault():n>=i-r&&e-s<0&&a.preventDefault()}),!1)};t.style.display="block",t.addEventListener("touchmove",(function(a){a.stopPropagation(),a.target==t&&a.preventDefault()}),!1),e(a)}},mounted:function(){this.ready()}},r=i,c=(s("ce11"),s("2877")),l=Object(c["a"])(r,e,n,!1,null,"fe7eecd0",null);a["a"]=l.exports},9158:function(t,a,s){"use strict";s("0d03");a["a"]=function(t,a){var s=new Date(t),e=s.getFullYear(),n=s.getMonth()+1,i=s.getDate();return e+(a?"年":"-")+(n<10?"0"+n:n)+(a?"月":"-")+(i<10?"0"+i:i)+(a?"日":"")}},"9f7a":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("transition",{attrs:{name:"zoom"}},[t.show?e("a",{staticClass:"search-button",on:{click:function(a){return t.$router.push({name:"searchIndex"})}}},[e("img",{attrs:{src:s("0a17")}})]):t._e()])},n=[],i={name:"SearchButton",data:function(){return{show:!1}},mounted:function(){this.show=!0}},r=i,c=(s("74ad"),s("2877")),l=Object(c["a"])(r,e,n,!1,null,"6ba87d5b",null);a["a"]=l.exports},a4f2:function(t,a,s){},b2b8:function(t,a,s){t.exports=s.p+"img/songlist-active.f332bfd9.svg"},b2dd:function(t,a,s){"use strict";var e=s("4cb2"),n=s.n(e);n.a},bdfa:function(t,a,s){},c0d6:function(t,a,s){},c31e:function(t,a,s){"use strict";var e=s("a4f2"),n=s.n(e);n.a},ce11:function(t,a,s){"use strict";var e=s("c0d6"),n=s.n(e);n.a},d680:function(t,a,s){"use strict";s("0d03"),s("d3b7"),s("25f0");a["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=t.toString(),s=a.length;return s<=5?t:5<s&&s<=7?a.substr(0,s-4)+"万":8==s?a.substr(0,s-7)+"."+a.substr(1,s-6)+"千万":s>12?"破兆":a.substr(0,s-8)+"."+a.substr(1,s-7)+"亿"}},e399:function(t,a,s){"use strict";var e=s("4296"),n=s.n(e);n.a},f114:function(t,a,s){"use strict";var e=s("bdfa"),n=s.n(e);n.a},fafb:function(t,a,s){}}]);