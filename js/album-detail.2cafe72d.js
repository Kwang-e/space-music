(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["album-detail"],{"00b3":function(t,s,a){},6704:function(t,s,a){"use strict";var e=a("00b3"),l=a.n(e);l.a},d680:function(t,s,a){"use strict";a("0d03"),a("d3b7"),a("25f0");s["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=t.toString(),a=s.length;return a<=5?t:5<a&&a<=7?s.substr(0,a-4)+"万":8==a?s.substr(0,a-7)+"."+s.substr(1,a-6)+"千万":a>12?"破兆":s.substr(0,a-8)+"."+s.substr(1,a-7)+"亿"}},f7b4:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"album-detail"},[e("app-top"),e("back",{on:{back:t.handleBack}}),e("div",{staticClass:"logo-pos"},[e("logo")],1),e("search-button"),e("corner-label",{attrs:{size:"md"}},[e("corner-tip",{attrs:{text:"专辑"}}),e("div",{staticClass:"wrap"},[e("div",{staticClass:"pic",on:{click:function(s){t.show=!0}}},[e("img",{attrs:{src:t.album.picUrl&&t.album.picUrl+"?param=250y250"}})]),e("div",{staticClass:"info"},[e("label",{staticClass:"type"},[t._v(t._s(t.album.type)),t.album.subType?e("label",[t._v("("+t._s(t.album.subType)+")")]):t._e()]),e("h2",{staticClass:"name"},[t._v(" "+t._s(t.album.name)),t.album.alias&&t.album.alias.length?e("label",[t._v("("+t._s(t.alias(t.album.alias))+")")]):t._e()]),e("p",{staticClass:"artist",class:{vert:t.artist.length>1}},t._l(t.artist,(function(s,a){return e("span",{key:a,staticClass:"art",on:{click:function(a){return t.handleArtist(s.id)}}},[e("label",0==a?[e("img",{attrs:{src:t.album.artist&&t.album.artist.picUrl+"?param=80y80"}})]:[e("img",{attrs:{src:s.pic+"?param=80y80"}})]),t._v(" "+t._s(s.name)+" ")])})),0),e("p",{staticClass:"pub"},[e("label",[t._v("发行时间：")]),t._v(t._s(t.datetime(t.album.publishTime,!0))+" ")]),e("p",{staticClass:"comp"},[e("label",[t._v("发行公司：")]),t._v(t._s(t.album.company))])])]),e("div",{staticClass:"statistic"},[e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("歌曲")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.album.size)))])]),e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("分享")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.album.info.shareCount)))])]),e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("评论")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.album.info.commentCount)))])])]),e("p",{ref:"desc",staticClass:"desc"},[e("label",[t._v("[ 专辑介绍 ]")]),t._v(t._s(t.album.description)+" ")]),e("div",{staticClass:"desc-btn",class:{show:t.descEl&&t.descEl.className.includes("overflow")},on:{click:function(s){t.descEl.className="desc",t.descEl=null}}},[t._v(" 展开 ")])],1),e("h3",{staticClass:"title"},[t._v("专辑歌曲"),e("a",{staticClass:"play",on:{click:t.handlePlay}},[e("img",{attrs:{src:a("af53")}}),t._v("播放")]),e("i",{staticClass:"total"},[t._v("共"+t._s(t.songs.length)+"首")])]),e("ul",{staticClass:"list"},t._l(t.songs,(function(s,a){return e("li",{key:a,on:{click:function(a){return t.handleSong(s.id)}}},[e("label",{staticClass:"index"},[t._v(" "+t._s((""+(a+1)).padStart(t.songs.length.toString().length,0)))]),e("span",[t._v(" "+t._s(s.name)),s.alia.length?e("label",[t._v("("+t._s(t.alias(s.alia))+")")]):t._e()]),s.dt?e("label",{staticClass:"duration"},[t._v(" "+t._s(t.formatSeconds(s.dt,1e3))+" ")]):t._e()])})),0),e("comment",{attrs:{label:"专辑评论",total:t.comment.total,hot:t.comment.hotComments,list:t.comment.comments,paging:t.fetchComment(t.$route.params.id),current:t.current}}),t.show?e("photo",{attrs:{pre:t.album.picUrl+"?param=250y250",url:t.album.picUrl},on:{close:function(s){t.show=!1}}}):t._e()],1)},l=[],n=(a("d81d"),a("b0c0"),a("34b2")),i=a("66b7"),c=a("2241"),o=a("9f7a"),r=a("1634"),u=a("19eb"),m=a("4ea3"),d=a("7856"),b=a("1d30"),p=a("d680"),h=a("9158"),_=a("182a"),f={name:"AlbumDetail",components:{AppTop:n["a"],Back:i["a"],Logo:c["a"],SearchButton:o["a"],CornerLabel:r["a"],CornerTip:u["a"],Comment:m["a"],Photo:d["a"]},data:function(){return{album:{info:{}},songs:[],artist:[],descEl:null,comment:{},current:1,show:!1}},methods:{init:function(){var t=this,s=this.$route.params.id;this.$store.commit("setIsLoading",!0),this.$api.album.detail(s).then((function(s){t.$store.commit("setIsLoading",!1),200==s.code?(t.album=s.album,t.songs=s.songs,t.artist=t.album.artists.map((function(t){return{id:t.id,name:t.name,pic:t.picUrl}})),t.setDescHeight()):t.$store.commit("setAlert",{type:"error",content:"获取专辑详情失败"})})),this.fetchComment(s)(1)},alias:b["a"],count:p["a"],datetime:h["a"],formatSeconds:_["a"],setDescHeight:function(){var t=this;this.$nextTick((function(){t.descEl=t.$refs.desc,t.descEl&&t.descEl.clientHeight>150&&(t.descEl.className+=" overflow")}))},handleBack:function(){history.back()},handleArtist:function(t){this.$router.push({name:"artistDetail",params:{id:t}})},handleSong:function(t){this.$router.push({name:"songDetail",params:{id:t}})},handlePlay:function(){var t=this.songs[0];this.$store.commit("setPlayer",{url:t._url||"loading",play:this.$store.state.player.isPlayed,index:0,list:this.songs.map((function(t){return t})),lyric:t._lyric||[],isPlayed:this.$store.state.player.isPlayed})},fetchComment:function(t){var s=this;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=10;s.current=a,s.$api.album.comment(t,(s.current-1)*e,e).then((function(t){200==t.code&&(s.comment=t)}))}}},created:function(){this.init()}},v=f,C=(a("6704"),a("2877")),g=Object(C["a"])(v,e,l,!1,null,"e9687b14",null);s["default"]=g.exports}}]);