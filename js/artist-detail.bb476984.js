(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["artist-detail"],{"03b1":function(t,s,a){},"0a17":function(t,s,a){t.exports=a.p+"img/search.403f1f98.svg"},"12c7":function(t,s,a){"use strict";var e=a("69d2"),i=a.n(e);i.a},1634:function(t,s,a){"use strict";var e=function(){var t,s=this,a=s.$createElement,e=s._self._c||a;return e("label",{staticClass:"corner-label",class:(t={},t[s.size]=s.size,t)},[s._t("default"),e("i",{staticClass:"cor cor1"}),e("i",{staticClass:"cor cor2"}),e("i",{staticClass:"cor cor3"}),e("i",{staticClass:"cor cor4"})],2)},i=[],n={name:"CornerLabel",props:{size:{type:String,default:"sm"}}},r=n,c=(a("3912"),a("2877")),l=Object(c["a"])(r,e,i,!1,null,"37649290",null);s["a"]=l.exports},1799:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.pageNums.length>1?a("ul",{staticClass:"pagination",class:{default:"default"==t.mode}},t._l(t.pageNums,(function(s){return a("li",{key:s,staticClass:"page",class:{active:t.current==s+1},on:{click:function(a){return t.handleClick(s)}}},[t._v(" "+t._s(s+1)+" ")])})),0):t._e()},i=[],n=5,r={name:"Pagination",props:["mode","total","limit","current"],computed:{pageNums:function(){var t=[];if(this.total<=this.limit)t=[0];else{var s,a,e;e=Math.ceil(this.total/this.limit),this.current-3<=0?(s=0,a=n<e?n:e):this.current-3>0&&this.current+2<=e?(s=this.current-3,a=this.current+2):(a=e,s=a-5),s<0&&(s=0);for(var i=s;i<a;i++)t.push(i)}return t}},methods:{handleClick:function(t){t+1!=this.current&&this.$emit("paging",t+1)}}},c=r,l=(a("12c7"),a("2877")),o=Object(l["a"])(c,e,i,!1,null,"10f6c8b4",null);s["a"]=o.exports},"188f":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"items"},t._l(t.list,(function(s,i){return e("li",{key:i,staticClass:"item",on:{click:function(a){return t.$emit("item-route",{id:s.id,type:t.type})}}},["ranking"==t.type?e("span",{staticClass:"ranking",class:{top3:i<3}},[t._v(" "+t._s((""+(i+1)).padStart(t.list.length.toString().length,0))+" ")]):t._e(),e("span",{staticClass:"thumb",class:{album:"new-albums"==t.type,hide:"search-list"==t.type},style:{backgroundImage:"url("+("new-albums"==t.type?s.picUrl:s.album&&s.album.picUrl||s.album.artist&&s.album.artist.img1v1Url||t.defArtImg)+"?param=120y120)"}}),e("span",{staticClass:"infos"},[e("div",{staticClass:"name"},["new-albums"==t.type?e("label",{staticClass:"size"},[e("img",{attrs:{src:a("b2b8")}}),t._v(t._s(s.size))]):t._e(),t._v(" "+t._s(s.name)+" "),s.alias&&s.alias.length?e("label",{staticClass:"alias"},[t._v("("+t._s(t.alias(s.alias))+")")]):t._e()]),e("div",{staticClass:"names"},[t._v(" "+t._s(1==s.artists.length?"new-albums"==t.type?s.artist.name:s.artists[0].name:s.artists.reduce((function(t,a,e){return t+(a.name+(s.artists.length!=e+1?" / ":""))}),""))+" ")])]),s.duration?e("span",{staticClass:"duration"},[t._v(t._s(t.formatSeconds(s.duration,1e3)))]):t._e()])})),0)},i=[],n=a("1d30"),r=a("182a"),c=a("5fb0"),l={name:"Items",props:{type:{type:String},list:{type:Array,default:function(){return[]}}},data:function(){return{defArtImg:c["a"]}},methods:{alias:n["a"],formatSeconds:r["a"]}},o=l,u=(a("b2dd"),a("2877")),m=Object(u["a"])(o,e,i,!1,null,"37ef9466",null);s["a"]=m.exports},"19eb":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("label",{ref:"cornerTip",staticClass:"corner-tip"},[a("label",{staticClass:"bg",attrs:{"data-tip":t.text}},[a("label",{staticClass:"tt"},[t._v(t._s(t.text))])])])},i=[],n={name:"CornerTip",props:["text"],mounted:function(){var t=this.$refs.cornerTip.children[0],s=t.children[0],a=s.clientWidth>37?s.clientWidth:37;t.style.borderWidth=a+"px",t.style.top=t.style.right=-a+"px",s.style.transform="translate(-0.7rem, ".concat(a/2,"px)")}},r=n,c=(a("c31e"),a("2877")),l=Object(c["a"])(r,e,i,!1,null,"06c15408",null);s["a"]=l.exports},3912:function(t,s,a){"use strict";var e=a("fafb"),i=a.n(e);i.a},"3dc4":function(t,s,a){},"4cb2":function(t,s,a){},"534a":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"artist-detail"},[e("app-top"),e("back",{on:{back:t.handleBack}}),e("div",{staticClass:"logo-pos"},[e("logo")],1),e("search-button"),e("corner-label",{attrs:{size:"md"}},[e("corner-tip",{attrs:{text:"歌手"}}),e("div",{staticClass:"pic",style:{"background-image":"url("+t.artist.img+"?param=250y250)"},on:{click:function(s){t.show=!0}}}),e("h2",[t._v(t._s(t.artist.name)),t.artist.alias&&t.artist.alias.length||t.artist.transNames&&t.artist.transNames.length?e("label",[t._v("("+t._s(t.alias(t.artist.alias)||t.alias(t.artist.transNames))+")")]):t._e()]),e("div",{staticClass:"statistic"},[e("label",{staticClass:"music",on:{click:function(s){return t.goto("music")}}},[t._v("歌曲："+t._s(t.artist.musicSize))]),e("i"),e("label",{staticClass:"album",on:{click:function(s){return t.goto("album")}}},[t._v("专辑："+t._s(t.artist.albumSize))])]),t.artist.briefDesc?e("p",{ref:"desc",staticClass:"desc"},[e("label",[t._v("[ 歌手介绍 ]")]),t._v(t._s(t.artist.briefDesc))]):e("p",{staticClass:"none"},[t._v("暂无介绍")]),e("div",{staticClass:"desc-btn",class:{show:t.descEl&&t.descEl.className.includes("overflow")},on:{click:function(s){t.descEl.className="desc",t.descEl=null}}},[t._v("展开")])],1),e("h3",{ref:"music",staticClass:"title"},[t._v("歌手热门歌曲"),e("a",{staticClass:"play",on:{click:t.handlePlay}},[e("img",{attrs:{src:a("af53")}}),t._v("播放")]),e("i",{staticClass:"total"},[t._v("共"+t._s(t.songs.length)+"首")])]),e("ul",{staticClass:"list"},t._l(t.songs,(function(s,a){return e("li",{key:a,on:{click:function(a){return t.handleSong(s.id)}}},[e("label",{staticClass:"index"},[t._v(t._s((""+(a+1)).padStart(t.songs.length.toString().length,0)))]),e("span",[e("span",[t._v(t._s(s.name)),s.alia.length?e("label",[t._v("("+t._s(t.alias(s.alia))+")")]):t._e()])]),s.dt?e("label",{staticClass:"duration"},[t._v(t._s(t.formatSeconds(s.dt,1e3)))]):t._e()])})),0),e("h3",{ref:"album",staticClass:"title"},[t._v("歌手热门专辑"),e("i",{staticClass:"total"},[t._v("共"+t._s(t.artist.albumSize)+"张")])]),t.albums.length>0?e("items",{attrs:{type:"new-albums",list:t.albums},on:{"item-route":t.handleAlbum}}):t._e(),e("pagination",{attrs:{mode:"default",total:t.artist.albumSize,limit:t.limit,current:t.current},on:{paging:t.fetchAlbum}}),e("page-footer"),t.show?e("photo",{attrs:{pre:t.artist.img+"?param=250y250",url:t.artist.img},on:{close:function(s){t.show=!1}}}):t._e()],1)},i=[],n=(a("d81d"),a("b0c0"),a("34b2")),r=a("66b7"),c=a("2241"),l=a("9f7a"),o=a("1634"),u=a("19eb"),m=a("188f"),f=a("1799"),d=a("c8cc"),h=a("7856"),p=a("1d30"),b=a("182a"),g={name:"ArtistDetail",components:{AppTop:n["a"],Back:r["a"],Logo:c["a"],SearchButton:l["a"],CornerLabel:o["a"],CornerTip:u["a"],Items:m["a"],Pagination:f["a"],PageFooter:d["a"],Photo:h["a"]},data:function(){return{artist:{},songs:[],albums:[],hotMusicEl:null,hotAlbumEl:null,descEl:null,limit:10,current:1,show:!1}},methods:{init:function(){var t=this,s=this.$route.params.id;this.$store.commit("setIsLoading",!0),this.$api.artist.songs(s).then((function(s){t.$store.commit("setIsLoading",!1),200==s.code?(t.artist["img"]=s.artist.picUrl,t.artist["name"]=s.artist.name,t.artist["alias"]=s.artist.alias,t.artist["transNames"]=s.artist.transNames,t.artist["musicSize"]=s.artist.musicSize,t.artist["albumSize"]=s.artist.albumSize,t.artist["briefDesc"]=s.artist.briefDesc,t.songs=s.hotSongs,t.setDescHeight()):t.$store.commit("setAlert",{type:"error",content:"获取歌手歌曲失败"})})).catch((function(){t.$store.commit("setIsLoading",!1),t.$store.commit("setAlert",{type:"error",content:"服务异常"})})),this.fetchAlbum(1)},ready:function(){this.hotMusicEl=this.$refs.music,this.hotAlbumEl=this.$refs.album},alias:p["a"],formatSeconds:b["a"],goto:function(t){"music"==t?this.hotMusicEl.scrollIntoView():"album"==t&&this.hotAlbumEl.scrollIntoView()},setDescHeight:function(){var t=this;this.$nextTick((function(){t.descEl=t.$refs.desc,t.descEl&&t.descEl.clientHeight>150&&(t.descEl.className+=" overflow")}))},handleBack:function(){history.go(-1)},handlePlay:function(){var t=this.songs[0];this.$store.commit("setPlayer",{url:t._url||"loading",play:this.$store.state.player.isPlayed,index:0,list:this.songs.map((function(t){return t})),lyric:t._lyric||[],isPlayed:this.$store.state.player.isPlayed})},handleSong:function(t){this.$router.push({name:"songDetail",params:{id:t}})},handleAlbum:function(t){var s=t.id;this.$router.push({name:"albumDetail",params:{id:s}})},fetchAlbum:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.current=s,this.$api.artist.albums(this.$route.params.id,(this.current-1)*this.limit,this.limit).then((function(s){t.$store.commit("setIsLoading",!1),200==s.code?t.albums=s.hotAlbums:t.$store.commit("setAlert",{type:"error",content:"获取歌手专辑失败"})}))}},created:function(){this.init()},mounted:function(){this.ready()}},v=g,_=(a("654a"),a("2877")),C=Object(_["a"])(v,e,i,!1,null,"6d89c108",null);s["default"]=C.exports},"5fb0":function(t,s,a){"use strict";a.d(s,"a",(function(){return e}));var e="https://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg"},"654a":function(t,s,a){"use strict";var e=a("e5a8"),i=a.n(e);i.a},"66b7":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("a",{staticClass:"back",on:{click:function(s){return t.$emit("back")}}})},i=[],n={name:"Back"},r=n,c=(a("f114"),a("2877")),l=Object(c["a"])(r,e,i,!1,null,"2d086ee5",null);s["a"]=l.exports},6787:function(t,s,a){},"69d2":function(t,s,a){},"74ad":function(t,s,a){"use strict";var e=a("6787"),i=a.n(e);i.a},7856:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{ref:"photo",staticClass:"photo",on:{click:function(s){return t.$emit("close")}}},[a("div",{ref:"img",staticClass:"wrap"},[a("img",{staticClass:"preview",class:{hide:t.loaded},attrs:{src:t.pre}}),a("img",{class:{hide:!t.loaded},attrs:{src:t.url},on:{load:t.handleLoaded}})])])},i=[],n=a("01fe"),r={name:"Photo",props:["pre","url"],data:function(){return{loaded:!1}},methods:{ready:function(){Object(n["a"])(this.$refs.photo,[this.$refs.img])},handleLoaded:function(){this.loaded=!0}},mounted:function(){this.ready()}},c=r,l=(a("c3fd"),a("2877")),o=Object(l["a"])(c,e,i,!1,null,"1701689d",null);s["a"]=o.exports},"9b9a":function(t,s,a){"use strict";var e=a("03b1"),i=a.n(e);i.a},"9f7a":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"zoom"}},[t.show?e("a",{staticClass:"search-button",on:{click:function(s){return t.$router.push({name:"searchIndex"})}}},[e("img",{attrs:{src:a("0a17")}})]):t._e()])},i=[],n={name:"SearchButton",data:function(){return{show:!1}},mounted:function(){this.show=!0}},r=n,c=(a("74ad"),a("2877")),l=Object(c["a"])(r,e,i,!1,null,"6ba87d5b",null);s["a"]=l.exports},a4f2:function(t,s,a){},b2b8:function(t,s,a){t.exports=a.p+"img/songlist-active.f332bfd9.svg"},b2dd:function(t,s,a){"use strict";var e=a("4cb2"),i=a.n(e);i.a},bdfa:function(t,s,a){},c31e:function(t,s,a){"use strict";var e=a("a4f2"),i=a.n(e);i.a},c3fd:function(t,s,a){"use strict";var e=a("3dc4"),i=a.n(e);i.a},c8cc:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page-footer"},[a("a",{on:{click:t.go2Top}},[t._v("回到顶部")])])},i=[],n={name:"PageFooter",methods:{go2Top:function(){document.querySelector(".app-top").scrollIntoView({behavior:"smooth",block:"start"})}}},r=n,c=(a("9b9a"),a("2877")),l=Object(c["a"])(r,e,i,!1,null,"7a1ce8ae",null);s["a"]=l.exports},e5a8:function(t,s,a){},f114:function(t,s,a){"use strict";var e=a("bdfa"),i=a.n(e);i.a},fafb:function(t,s,a){}}]);