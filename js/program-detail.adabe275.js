(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["program-detail"],{"106e":function(a,t,s){a.exports=s.p+"img/radio.b86ccf58.svg"},"33dc":function(a,t,s){"use strict";s.r(t);var r=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"program-detail"},[r("app-top"),r("back",{on:{back:a.handleBack}}),r("div",{staticClass:"logo-pos"},[r("logo")],1),r("search-button"),r("corner-label",{attrs:{size:"md"}},[r("corner-tip",{attrs:{text:"节目"}}),r("div",{staticClass:"head"},[r("img",{attrs:{src:a.program.dj.avatarUrl+"?param=80y80"},on:{click:function(t){return a.handleUser(a.program.dj.userId)}}}),r("label",{staticClass:"nickname",on:{click:function(t){return a.handleUser(a.program.dj.userId)}}},[a._v(a._s(a.program.dj.nickname))]),r("img",{staticClass:"icon",attrs:{src:s("cabc")}}),a.program.dj.experts?r("label",{staticClass:"expert"},[a._v("EXP")]):a._e(),a.program.dj.vipType?r("label",{staticClass:"vip"},[a._v("VIP")]):a._e()]),r("div",{staticClass:"program"},[r("span",{staticClass:"wrap w1"},[r("label",{staticClass:"serial"},[a._v("#"+a._s(a.program.serialNum))]),r("img",{attrs:{src:a.program.coverUrl+"?param=200y200"}})]),r("span",{staticClass:"wrap w2"},[r("h2",{staticClass:"name",on:{click:a.handlePlay}},[a.program.name&&a.url!=a.$store.state.player.url?r("img",{attrs:{src:s("e802")}}):a._e(),a._v(" "+a._s(a.program.name)+" ")]),r("p",[r("label",{staticClass:"pk"},[a._v("播放时长：")]),r("label",{staticClass:"pv"},[a._v(a._s(a.formatSeconds(a.program.duration,1e3)))])]),r("p",[r("label",{staticClass:"pk"},[a._v("创建时间：")]),r("label",{staticClass:"pv"},[a._v(a._s(a.datetime(a.program.createTime,!0)))])])])]),r("div",{staticClass:"statistic"},[r("span",{staticClass:"count"},[r("label",{staticClass:"name"},[a._v("播放")]),r("label",{staticClass:"num"},[a._v(a._s(a.count(a.program.listenerCount)))])]),r("span",{staticClass:"count"},[r("label",{staticClass:"name"},[a._v("喜欢")]),r("label",{staticClass:"num"},[a._v(a._s(a.count(a.program.likedCount)))])]),r("span",{staticClass:"count"},[r("label",{staticClass:"name"},[a._v("分享")]),r("label",{staticClass:"num"},[a._v(a._s(a.count(a.program.shareCount)))])]),r("span",{staticClass:"count"},[r("label",{staticClass:"name"},[a._v("订阅")]),r("label",{staticClass:"num"},[a._v(a._s(a.count(a.program.subscribedCount)))])]),r("span",{staticClass:"count"},[r("label",{staticClass:"name"},[a._v("评论")]),r("label",{staticClass:"num"},[a._v(a._s(a.count(a.program.commentCount)))])])]),r("div",{staticClass:"radio",on:{click:function(t){return a.handleRadio(a.program.radio.id)}}},[r("img",{staticClass:"pic",attrs:{src:a.program.radio.picUrl+"?param=80y80"}}),r("label",{staticClass:"name"},[a._v(a._s(a.program.radio.name))]),r("label",{staticClass:"subfix"},[a._v("电台")]),r("img",{staticClass:"icon",attrs:{src:s("c35a")}})]),a.program.description?r("p",{ref:"desc",staticClass:"desc"},[r("label",[a._v("[ 节目介绍 ]")]),a._v(a._s(a.program.description))]):r("p",{staticClass:"none"},[a._v("暂无介绍")]),r("div",{staticClass:"desc-btn",class:{show:a.descEl&&a.descEl.className.includes("overflow")},on:{click:function(t){a.descEl.className="desc",a.descEl=null}}},[a._v("展开")])],1),r("h3",{staticClass:"title"},[a._v("节目推荐"),r("i",{staticClass:"total"},[a._v("共"+a._s(a.recPrograms.length)+"期")])]),r("ul",{staticClass:"list"},a._l(a.recPrograms,(function(t,i){return r("li",{key:i,attrs:{"data-index":i+1}},[r("div",{staticClass:"up",on:{click:function(s){return a.handleProgram(t.id)}}},[r("img",{attrs:{src:t.picUrl+"?param=120y120"}}),r("span",{staticClass:"wrap"},[r("p",{staticClass:"name"},[r("label",{staticClass:"serial"},[a._v("#"+a._s(t.program.serialNum))]),r("label",{staticClass:"na"},[a._v(a._s(t.name))]),r("label",{staticClass:"duration"},[a._v(a._s(a.formatSeconds(t.program.duration,1e3)))])]),r("p",{staticClass:"count"},[r("label",[a._v(a._s(a.count(t.program.listenerCount))+"次播放")]),r("label",[a._v(a._s(a.datetime(t.program.createTime,!0)))])])])]),r("div",{staticClass:"bottom"},[r("span",{staticClass:"radio",on:{click:function(s){return a.handleRadio(t.program.radio.id)}}},[r("img",{attrs:{src:t.program.radio.picUrl+"?param=50y50"}}),r("span",[a._v(a._s(t.program.radio.name))]),r("img",{attrs:{src:s("106e")}})]),r("span",{staticClass:"dj"},[r("img",{attrs:{src:s("cabc")}}),r("span",{on:{click:function(s){return a.handleUser(t.program.dj.userId)}}},[a._v(a._s(t.program.dj.nickname))]),r("img",{attrs:{src:t.program.dj.avatarUrl+"?param=50y50"},on:{click:function(s){return a.handleUser(t.program.dj.userId)}}})])])])})),0),r("comment",{attrs:{label:"节目评论",total:a.comment.total,hot:a.comment.hotComments,list:a.comment.comments,paging:a.fetchComment(a.$route.params.id),current:a.current}})],1)},i=[],e=(s("7db0"),s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("34b2")),c=s("66b7"),n=s("2241"),o=s("9f7a"),l=s("1634"),m=s("19eb"),d=s("4ea3"),p=s("d680"),u=s("9158"),g=s("182a"),h={name:"ProgramDetail",components:{AppTop:e["a"],Back:c["a"],Logo:n["a"],SearchButton:o["a"],CornerLabel:l["a"],CornerTip:m["a"],Comment:d["a"]},data:function(){return{program:{dj:{},radio:{}},url:null,lyric:[],track:{},descEl:null,recPrograms:[],current:1,comment:{total:0,list:[]}}},watch:{"$route.params":function(){this.init()}},methods:{init:function(){var a=this;this.$store.commit("setIsLoading",!0);var t=this.$route.params.id;this.$api.radio.programDetail(t).then((function(t){a.program=t.program,a.track={id:a.program.mainTrackId,pid:a.program.id,al:{picUrl:a.program.coverUrl},name:a.program.name,alia:[],ar:[{id:a.program.dj.userId,name:a.program.dj.nickname,pic:a.program.dj.avatarUrl}]},a.setDescHeight(),Promise.all([a.$api.song.check(a.track.id),a.$api.song.url(a.track.id),a.$api.song.lyric(a.track.id)]).then((function(t){t[0].success&&(a.url=t[1].data[0].url,a.lyric=t[2].briefDesc||[],a.$store.commit("setIsLoading",!1))}))})),this.$api.radio.recommendOfProgram().then((function(t){a.recPrograms=t.result})),this.fetchComment(t)(1)},count:p["a"],datetime:u["a"],formatSeconds:g["a"],setDescHeight:function(){var a=this;this.$nextTick((function(){a.descEl=a.$refs.desc,a.descEl&&a.descEl.clientHeight>150&&(a.descEl.className+=" overflow")}))},fetchComment:function(a){var t=this;return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=10;t.current=s,t.$api.radio.programComment(a,(t.current-1)*r,r).then((function(a){200==a.code&&(t.comment=a)}))}},handleBack:function(){history.back()},handlePlay:function(){var a=this;if(this.url){var t=this.$store.state.player.list;t.find((function(t){return t.id==a.track.id}))?this.$store.commit("setAlert",{type:"prompt",content:"节目已添加到播放列表"}):(this.track["_url"]=this.url,this.track["_lyric"]=this.lyric,t.unshift(this.track),this.$store.commit("setPlayer",{url:this.url,play:!0,index:0,list:t,lyric:this.lyric}))}else this.$store.commit("setAlert",{type:"error",content:"暂无播放链接"})},handleProgram:function(a){this.$router.push({name:"programDetail",params:{id:a}}),this.init()},handleRadio:function(a){this.$router.push({name:"radioDetail",params:{id:a}})},handleUser:function(a){this.$router.push({name:"userDetail",params:{id:a}})}},created:function(){this.init()}},v=h,f=(s("7859"),s("2877")),C=Object(f["a"])(v,r,i,!1,null,"42bd9c9d",null);t["default"]=C.exports},"3a8f":function(a,t,s){},7859:function(a,t,s){"use strict";var r=s("3a8f"),i=s.n(r);i.a},"7db0":function(a,t,s){"use strict";var r=s("23e7"),i=s("b727").find,e=s("44d2"),c="find",n=!0;c in[]&&Array(1)[c]((function(){n=!1})),r({target:"Array",proto:!0,forced:n},{find:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),e(c)},c35a:function(a,t,s){a.exports=s.p+"img/radio-active.727dee2b.svg"},cabc:function(a,t,s){a.exports=s.p+"img/mic.63881258.svg"},d680:function(a,t,s){"use strict";s("0d03"),s("d3b7"),s("25f0");t["a"]=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=a.toString(),s=t.length;return s<=5?a:5<s&&s<=7?t.substr(0,s-4)+"万":8==s?t.substr(0,s-7)+"."+t.substr(1,s-6)+"千万":s>12?"破兆":t.substr(0,s-8)+"."+t.substr(1,s-7)+"亿"}},e802:function(a,t,s){a.exports=s.p+"img/play-circle.2c8ead7c.svg"}}]);