(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["radio-detail"],{"0a17":function(t,a,s){t.exports=s.p+"img/search.403f1f98.svg"},"12c7":function(t,a,s){"use strict";var e=s("69d2"),i=s.n(e);i.a},1634:function(t,a,s){"use strict";var e=function(){var t,a=this,s=a.$createElement,e=a._self._c||s;return e("label",{staticClass:"corner-label",class:(t={},t[a.size]=a.size,t)},[a._t("default"),e("i",{staticClass:"cor cor1"}),e("i",{staticClass:"cor cor2"}),e("i",{staticClass:"cor cor3"}),e("i",{staticClass:"cor cor4"})],2)},i=[],n={name:"CornerLabel",props:{size:{type:String,default:"sm"}}},r=n,c=(s("4dbe"),s("2877")),o=Object(c["a"])(r,e,i,!1,null,"89ddf99e",null);a["a"]=o.exports},1799:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.pageNums.length>1?s("ul",{staticClass:"pagination",class:{default:"default"==t.mode}},t._l(t.pageNums,(function(a){return s("li",{key:a,staticClass:"page",class:{active:t.current==a+1},on:{click:function(s){return t.handleClick(a)}}},[t._v(" "+t._s(a+1)+" ")])})),0):t._e()},i=[],n=5,r={name:"Pagination",props:["mode","total","limit","current"],computed:{pageNums:function(){var t=[];if(this.total<=this.limit)t=[0];else{var a,s,e;e=Math.ceil(this.total/this.limit),this.current-3<=0?(a=0,s=n<e?n:e):this.current-3>0&&this.current+2<=e?(a=this.current-3,s=this.current+2):(s=e,a=s-5),a<0&&(a=0);for(var i=a;i<s;i++)t.push(i)}return t}},methods:{handleClick:function(t){t+1!=this.current&&this.$emit("paging",t+1)}}},c=r,o=(s("12c7"),s("2877")),l=Object(o["a"])(c,e,i,!1,null,"10f6c8b4",null);a["a"]=l.exports},"19eb":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("label",{ref:"cornerTip",staticClass:"corner-tip"},[s("label",{staticClass:"bg",attrs:{"data-tip":t.text}},[s("label",{staticClass:"tt"},[t._v(t._s(t.text))])])])},i=[],n={name:"CornerTip",props:["text"],mounted:function(){var t=this.$refs.cornerTip.children[0],a=t.children[0],s=a.clientWidth>37?a.clientWidth:37;t.style.borderWidth=s+"px",t.style.top=t.style.right=-s+"px",a.style.transform="translate(-0.7rem, ".concat(s/2,"px)")}},r=n,c=(s("c31e"),s("2877")),o=Object(c["a"])(r,e,i,!1,null,"06c15408",null);a["a"]=o.exports},"4dbe":function(t,a,s){"use strict";var e=s("6d1e"),i=s.n(e);i.a},"62b2":function(t,a,s){"use strict";var e=s("bbb5"),i=s.n(e);i.a},"66b7":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"back",on:{click:function(a){return t.$emit("back")}}})},i=[],n={name:"Back"},r=n,c=(s("8293"),s("2877")),o=Object(c["a"])(r,e,i,!1,null,"7612d1d8",null);a["a"]=o.exports},6787:function(t,a,s){},"69d2":function(t,a,s){},"6d1e":function(t,a,s){},"74ad":function(t,a,s){"use strict";var e=s("6787"),i=s.n(e);i.a},8293:function(t,a,s){"use strict";var e=s("8772"),i=s.n(e);i.a},8772:function(t,a,s){},9158:function(t,a,s){"use strict";s("0d03");a["a"]=function(t,a){var s=new Date(t),e=s.getFullYear(),i=s.getMonth()+1,n=s.getDate();return e+(a?"年":"-")+(i<10?"0"+i:i)+(a?"月":"-")+(n<10?"0"+n:n)+(a?"日":"")}},"9f7a":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("transition",{attrs:{name:"zoom"}},[t.show?e("a",{staticClass:"search-button",on:{click:function(a){return t.$router.push({name:"searchIndex"})}}},[e("img",{attrs:{src:s("0a17")}})]):t._e()])},i=[],n={name:"SearchButton",data:function(){return{show:!1}},mounted:function(){this.show=!0}},r=n,c=(s("74ad"),s("2877")),o=Object(c["a"])(r,e,i,!1,null,"6ba87d5b",null);a["a"]=o.exports},a4f2:function(t,a,s){},bbb5:function(t,a,s){},c31e:function(t,a,s){"use strict";var e=s("a4f2"),i=s.n(e);i.a},c35a:function(t,a,s){t.exports=s.p+"img/radio-active.727dee2b.svg"},d606:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"radio-detail"},[e("app-top"),e("back",{on:{back:t.handleBack}}),e("div",{staticClass:"logo-pos"},[e("logo")],1),e("search-button"),e("corner-label",{attrs:{size:"md"}},[e("corner-tip",{attrs:{text:"电台"}}),e("div",{staticClass:"head",attrs:{"data-time":t.datetime(t.djRadio.createTime,!0)+"创建"}},[e("img",{attrs:{src:t.djRadio.picUrl+"?param=80y80"}}),e("span",{staticClass:"wrap"},[e("label",{staticClass:"category"},[t._v("[ "+t._s(t.djRadio.category)+" ]"),e("img",{attrs:{src:s("c35a")}})]),e("h2",{staticClass:"name"},[t._v(t._s(t.djRadio.name))])])]),e("div",{staticClass:"popularity",class:{lv1:t.djRadio.subCount<1e4,lv2:t.djRadio.subCount>=1e4&&t.djRadio.subCount<1e6,lv3:t.djRadio.subCount>=1e6}}),e("div",{staticClass:"creator"},[e("img",{attrs:{src:t.djRadio.dj.avatarUrl+"?param=200y200"},on:{click:function(a){return t.handleUser(t.djRadio.dj.userId)}}}),e("i",{staticClass:"mic"})]),t.djRadio.dj.experts||t.djRadio.dj.vipType?e("p",{staticClass:"exp-vip"},[t.djRadio.dj.experts?e("label",{staticClass:"exp"},[t._v(t._s(Object.values(t.djRadio.dj.experts).reduce((function(t,a,s){return 0==s?a:t+" | "+a}))))]):t._e(),t.djRadio.dj.vipType?e("label",{staticClass:"vip"},[t._v("VIP")]):t._e()]):t._e(),e("p",{staticClass:"nickname",on:{click:function(a){return t.handleUser(t.djRadio.dj.userId)}}},[t._v(t._s(t.djRadio.dj.nickname)),e("i",{class:{male:1==t.djRadio.dj.gender,female:2==t.djRadio.dj.gender,hide:0==t.djRadio.dj.gender}})]),t.djRadio.dj.signature?e("p",{staticClass:"signature"},[t._v(t._s(t.djRadio.dj.signature))]):t._e(),e("div",{staticClass:"statistic"},[e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("节目")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.djRadio.programCount)))])]),e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("分享")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.djRadio.shareCount)))])]),e("span",{staticClass:"count"},[e("label",{staticClass:"name"},[t._v("订阅")]),e("label",{staticClass:"num"},[t._v(t._s(t.count(t.djRadio.subCount)))])])]),t.djRadio.desc?e("p",{ref:"desc",staticClass:"desc"},[e("label",[t._v("[ 电台介绍 ]")]),t._v(t._s(t.djRadio.desc))]):e("p",{staticClass:"none"},[t._v("暂无介绍")]),e("div",{staticClass:"desc-btn",class:{show:t.descEl&&t.descEl.className.includes("overflow")},on:{click:function(a){t.descEl.className="desc",t.descEl=null}}},[t._v("展开")])],1),e("h3",{staticClass:"title"},[t._v("电台节目"),e("a",{staticClass:"play",on:{click:t.handlePlay}},[e("img",{attrs:{src:s("af53")}}),t._v("播放")]),e("i",{staticClass:"total"},[t._v("共"+t._s(t.count(t.djRadio.programCount))+"期")])]),e("ul",{staticClass:"program"},t._l(t.programs,(function(a,s){return e("li",{key:s,on:{click:function(s){return t.handleProgram(a.id)}}},[e("label",{staticClass:"index"},[t._v(t._s(a.serialNum))]),e("div",{staticClass:"wrap"},[e("div",{staticClass:"up"},[e("span",{staticClass:"name"},[t._v(t._s(a.name))]),e("span",{staticClass:"duration"},[t._v(t._s(t.formatSeconds(a.duration,1e3)))])]),e("div",{staticClass:"bottom"},[e("span",{staticClass:"play"},[t._v(t._s(t.count(a.listenerCount))+"次播放")]),e("span",{staticClass:"like"},[t._v(t._s(t.count(a.likedCount))+"次点赞")]),e("span",{staticClass:"time"},[t._v(t._s(t.datetime(a.createTime,!0)))])])])])})),0),e("pagination",{attrs:{mode:"default",total:t.total,limit:t.limit,current:t.current},on:{paging:function(a){t.fetchProgram(t.$route.params.id)(a)}}}),e("h3",{staticClass:"title"},[t._v("电台推荐"),e("i",{staticClass:"total"},[t._v("共"+t._s(t.recRadios.length)+"家")])]),e("ul",{staticClass:"list"},t._l(t.recRadios,(function(a,s){return e("li",{key:s},[e("div",{staticClass:"inner",on:{click:function(s){return t.handleItemRoute(a.id)}}},[e("img",{attrs:{src:a.picUrl+"?param=200y200"}}),a.programCount?e("span",{staticClass:"program"},[e("i"),t._v(t._s(a.programCount>999?"999+":a.programCount))]):t._e(),e("div",{staticClass:"wrap"},[e("label",{staticClass:"name"},[t._v(t._s(a.name))]),e("label",{staticClass:"cate"},[t._v(t._s(a.category||"---"))]),e("label",{staticClass:"count"},[t._v(t._s(t.count(a.subCount))),e("span",[t._v("订阅")])])])]),e("div",{staticClass:"dj"},[e("i",{staticClass:"wave",class:{lv1:a.subCount<1e4,lv2:a.subCount>=1e4&&a.subCount<1e6,lv3:a.subCount>=1e6}}),e("span",{on:{click:function(s){return t.handleUser(a.dj.userId)}}},[t._v(t._s(a.dj.nickname))]),e("img",{attrs:{src:a.dj.avatarUrl+"?param=50y50"},on:{click:function(s){return t.handleUser(a.dj.userId)}}})])])})),0)],1)},i=[],n=(s("d81d"),s("b0c0"),s("34b2")),r=s("66b7"),c=s("2241"),o=s("9f7a"),l=s("1634"),u=s("19eb"),d=s("1799"),m=s("d680"),p=s("9158"),f=s("182a"),v=[],h={name:"RadioDetail",components:{AppTop:n["a"],Back:r["a"],Logo:c["a"],SearchButton:o["a"],CornerLabel:l["a"],CornerTip:u["a"],Pagination:d["a"]},data:function(){return{djRadio:{dj:{}},descEl:null,total:0,limit:20,current:1,programs:[],recRadios:[]}},watch:{"$route.params":function(){this.init()}},methods:{init:function(){var t=this;this.$store.commit("setIsLoading",!0);var a=this.$route.params.id;this.$api.radio.detail(a).then((function(a){t.djRadio=a.djRadio,t.setDescHeight(),t.$store.commit("setIsLoading",!1)})),this.fetchProgram(a)(1),this.$api.radio.recommend().then((function(a){t.recRadios=a.djRadios}))},count:m["a"],datetime:p["a"],formatSeconds:f["a"],setDescHeight:function(){var t=this;this.$nextTick((function(){t.descEl=t.$refs.desc,t.descEl&&t.descEl.clientHeight>150&&(t.descEl.className+=" overflow")}))},fetchProgram:function(t){var a=this;return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a.current=s,a.$api.radio.program(t,(a.current-1)*a.limit,a.limit).then((function(t){a.total=t.count,a.programs=t.programs}))}},handleBack:function(){history.back()},handleProgram:function(t){this.$router.push({name:"programDetail",params:{id:t}})},handleItemRoute:function(t){this.$router.push({name:"radioDetail",params:{id:t}})},handleUser:function(t){this.$router.push({name:"userDetail",params:{id:t}})},handlePlay:function(){v=this.programs.map((function(t){return{id:t.mainTrackId,pid:t.id,al:{picUrl:t.coverUrl},name:t.name,alia:[],ar:[{id:t.dj.userId,name:t.dj.nickname,pic:t.dj.avatarUrl}]}})),this.$store.commit("setPlayer",{url:v[0]._url||"loading",play:!!v[0]._url,index:0,list:v,lyric:v[0]._lyric||[]})}},created:function(){this.init()}},C=h,_=(s("62b2"),s("2877")),b=Object(_["a"])(C,e,i,!1,null,"ac7c52b4",null);a["default"]=b.exports},d680:function(t,a,s){"use strict";s("0d03"),s("d3b7"),s("25f0");a["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=t.toString(),s=a.length;return s<=5?t:5<s&&s<=7?a.substr(0,s-4)+"万":8==s?a.substr(0,s-7)+"."+a.substr(1,s-6)+"千万":s>12?"破兆":a.substr(0,s-8)+"."+a.substr(1,s-7)+"亿"}}}]);