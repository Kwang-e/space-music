(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["playlist-detail"],{"0e81":function(t,s,a){},"188f":function(t,s,a){"use strict";var l=function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("ul",{staticClass:"items"},t._l(t.list,(function(s,i){return l("li",{key:i,staticClass:"item",on:{click:function(a){return t.$emit("item-route",{id:s.id,type:t.type})}}},["ranking"==t.type?l("span",{staticClass:"ranking",class:{top3:i<3}},[t._v(" "+t._s((""+(i+1)).padStart(t.list.length.toString().length,0))+" ")]):t._e(),l("span",{staticClass:"thumb",class:{album:"new-albums"==t.type,hide:"search-list"==t.type},style:{backgroundImage:"url("+("new-albums"==t.type?s.picUrl:s.album&&s.album.picUrl||s.album.artist&&s.album.artist.img1v1Url||t.defArtImg)+"?param=120y120)"}}),l("span",{staticClass:"infos"},[l("div",{staticClass:"name"},["new-albums"==t.type?l("label",{staticClass:"size"},[l("img",{attrs:{src:a("b2b8")}}),t._v(t._s(s.size))]):t._e(),t._v(" "+t._s(s.name)+" "),s.alias&&s.alias.length?l("label",{staticClass:"alias"},[t._v("("+t._s(t.alias(s.alias))+")")]):t._e()]),l("div",{staticClass:"names"},[t._v(" "+t._s(1==s.artists.length?"new-albums"==t.type?s.artist.name:s.artists[0].name:s.artists.reduce((function(t,a,l){return t+(a.name+(s.artists.length!=l+1?" / ":""))}),""))+" ")])]),s.duration?l("span",{staticClass:"duration"},[t._v(t._s(t.formatSeconds(s.duration,1e3)))]):t._e()])})),0)},i=[],e=a("1d30"),n=a("182a"),r=a("5fb0"),c={name:"Items",props:{type:{type:String},list:{type:Array,default:function(){return[]}}},data:function(){return{defArtImg:r["a"]}},methods:{alias:e["a"],formatSeconds:n["a"]}},o=c,u=(a("ffa5"),a("2877")),m=Object(u["a"])(o,l,i,!1,null,"23420693",null);s["a"]=m.exports},"5fb0":function(t,s,a){"use strict";a.d(s,"a",(function(){return l}));var l="https://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg"},"8db1":function(t,s,a){},a15b:function(t,s,a){"use strict";var l=a("23e7"),i=a("44ad"),e=a("fc6a"),n=a("b301"),r=[].join,c=i!=Object,o=n("join",",");l({target:"Array",proto:!0,forced:c||o},{join:function(t){return r.call(e(this),void 0===t?",":t)}})},b2b8:function(t,s,a){t.exports=a.p+"img/songlist-active.f332bfd9.svg"},d680:function(t,s,a){"use strict";a("0d03"),a("d3b7"),a("25f0");s["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=t.toString(),a=s.length;return a<=5?t:5<a&&a<=7?s.substr(0,a-4)+"万":8==a?s.substr(0,a-7)+"."+s.substr(1,a-6)+"千万":a>12?"破兆":s.substr(0,a-8)+"."+s.substr(1,a-7)+"亿"}},deef:function(t,s,a){"use strict";a.r(s);var l=function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("div",{staticClass:"playlist-detail"},[l("app-top"),l("back",{on:{back:t.handleBack}}),l("div",{staticClass:"logo-pos"},[l("logo")],1),l("search-button"),l("corner-label",{attrs:{size:"md"}},[l("corner-tip",{attrs:{text:"歌单"}}),l("div",{staticClass:"wrap"},[l("div",{staticClass:"pic"},[l("img",{attrs:{src:t.playlist.coverImgUrl&&t.playlist.coverImgUrl+"?param=250y250"}})]),l("div",{staticClass:"info"},[l("label",{staticClass:"track",on:{click:t.handleTrack}},[l("img",{attrs:{src:a("b2b8")}}),t._v(t._s(t.count(t.playlist.trackCount))+"首歌曲")]),l("h2",{staticClass:"name"},[t._v(t._s(t.playlist.name))]),l("p",{staticClass:"category"},[l("label",[t._v("所属分类：")]),t._l(t.playlist.tags,(function(s,a){return l("span",{key:a},[t._v(t._s(0==a?s:" / "+s))])})),t.playlist.tags&&0==t.playlist.tags.length?l("span",[t._v("无")]):t._e()],2),l("p",{staticClass:"update-time"},[l("label",[t._v("更新时间：")]),t._v(t._s(t.datetime(t.playlist.updateTime,!0)))])])]),l("div",{staticClass:"wrap flex-start"},[l("span",{staticClass:"count"},[l("label",{staticClass:"label"},[t._v("播放")]),l("label",{staticClass:"num"},[t._v(t._s(t.count(t.playlist.playCount)))])]),l("span",{staticClass:"count"},[l("label",{staticClass:"label"},[t._v("分享")]),l("label",{staticClass:"num"},[t._v(t._s(t.count(t.playlist.shareCount)))])]),l("span",{staticClass:"count"},[l("label",{staticClass:"label"},[t._v("订阅")]),l("label",{staticClass:"num"},[t._v(t._s(t.count(t.playlist.subscribedCount)))])]),l("span",{staticClass:"count"},[l("label",{staticClass:"label"},[t._v("评论")]),l("label",{staticClass:"num"},[t._v(t._s(t.count(t.playlist.commentCount)))])])]),l("div",{staticClass:"create"},[l("p",{staticClass:"creator",on:{click:function(s){return t.handleUser(t.playlist.creator.userId)}}},[l("img",{attrs:{src:t.playlist.creator.avatarUrl&&t.playlist.creator.avatarUrl+"?param=80y80"}}),l("a",[t._v(t._s(t.playlist.creator.nickname))])]),l("p",{staticClass:"create-time"},[l("label",[t._v("创建于")]),t._v(t._s(t.datetime(t.playlist.createTime,!0)))])]),t.playlist.description?l("p",{ref:"desc",staticClass:"desc"},[l("label",[t._v("[ 歌单介绍 ]")]),t._v(t._s(t.playlist.description))]):l("p",{staticClass:"none"},[t._v("暂无介绍")]),l("div",{staticClass:"desc-btn",class:{show:t.descEl&&t.descEl.className.includes("overflow")},on:{click:function(s){t.descEl.className="desc",t.descEl=null}}},[t._v("展开")])],1),l("ul",{staticClass:"subscribers"},t._l(t.playlist.subscribers,(function(s,a){return l("li",{key:a},[l("div",{staticClass:"inner",on:{click:function(a){return t.handleUser(s.userId)}}},[l("img",{attrs:{src:s.avatarUrl+"?param=80y80"}}),l("a",[t._v(t._s(s.nickname))])])])})),0),t.playlist.subscribedCount?l("label",{staticClass:"total end"},[t._v("歌单共 "+t._s(t.playlist.subscribedCount)+"名 用户订阅")]):t._e(),l("h3",{ref:"playlist",staticClass:"title"},[t._v("歌单歌曲"),l("a",{staticClass:"play",on:{click:t.handlePlay}},[l("img",{attrs:{src:a("af53")}}),t._v("播放")]),l("i",{staticClass:"total"},[t._v("共"+t._s(t.playlist.trackCount)+"首")])]),t.songlist.length>0?l("items",{attrs:{list:t.songlist},on:{"item-route":t.handleItemRoute}}):t._e(),l("h3",{staticClass:"title"},[t._v("相关推荐"),l("i",{staticClass:"total"},[t._v("共"+t._s(t.relatedPlaylists.length)+"张")])]),l("ul",{staticClass:"related"},t._l(t.relatedPlaylists,(function(s,a){return l("li",{key:a,on:{click:function(a){return t.handlePlaylist(s.id)}}},[l("img",{attrs:{src:s.coverImgUrl}}),l("span",{staticClass:"info"},[l("p",{staticClass:"name"},[t._v(t._s(s.name))]),l("p",{staticClass:"artist"},[t._v(t._s(s.creator.nickname))])])])})),0),l("h3",{staticClass:"title"},[t._v("相似歌单"),l("i",{staticClass:"total"},[t._v("共"+t._s(t.simiPlaylists.length)+"张")])]),l("ul",{staticClass:"list"},t._l(t.simiPlaylists,(function(s,a){return l("li",{key:a,on:{click:function(a){return t.handlePlaylist(s.id)}}},[l("label",[t._v(t._s((""+(a+1)).padStart(t.simiPlaylists.length.toString().length,0)))]),l("span",[l("span",{staticClass:"na"},[t._v(t._s(s.name)),s.alias.length?l("label",[t._v("("+t._s(t.alias(s.alias))+")")]):t._e()]),l("span",{staticClass:"ar"},[t._v(t._s(s.artists.reduce((function(t,a,l){return t+(a.name+(s.artists.length!=l+1?" / ":""))}),"")))])])])})),0),l("comment",{attrs:{label:"歌单评论",total:t.comment.total,hot:t.comment.hotComments,list:t.comment.comments,paging:t.fetchComment(t.$route.params.id),current:t.current}})],1)},i=[],e=(a("a15b"),a("d81d"),a("b0c0"),a("34b2")),n=a("66b7"),r=a("2241"),c=a("9f7a"),o=a("188f"),u=a("1634"),m=a("19eb"),p=a("4ea3"),d=a("d680"),f=a("9158"),y=[],_={name:"PlaylistDetail",components:{AppTop:e["a"],Back:n["a"],Logo:r["a"],SearchButton:c["a"],Items:o["a"],CornerLabel:u["a"],CornerTip:m["a"],Comment:p["a"]},data:function(){return{playlist:{creator:{}},descEl:null,playlistEl:null,songlist:[],relatedPlaylists:[],simiPlaylists:[],comment:{},current:1}},methods:{init:function(){var t=this,s=this.$route.params.id;this.$store.commit("setIsLoading",!0),this.$api.playlist.detail(s).then((function(s){if(t.playlist=s.playlist,t.setDescHeight(),0!=t.playlist.trackIds.length){var a=t.playlist.trackIds.map((function(t){return t.id}));t.$api.song.detail(a.join(",")).then((function(s){t.songlist=s.songs.map((function(t){return{id:t.id,album:t.al,name:t.name,alias:t.alia,artists:t.ar,duration:t.dt}})),y=s.songs,t.$store.commit("setIsLoading",!1)}))}})),this.$api.playlist.related(s).then((function(s){200==s.code?t.relatedPlaylists=s.playlists:t.$store.commit("setAlert",{type:"error",content:"获取相关推荐失败"})})),this.$api.playlist.simiPlaylist(s).then((function(s){200==s.code?t.simiPlaylists=s.playlists:t.$store.commit("setAlert",{type:"error",content:"获取相似歌单失败"})})),this.fetchComment(s)(1)},ready:function(){this.playlistEl=this.$refs.playlist},count:d["a"],datetime:f["a"],setDescHeight:function(){var t=this;this.$nextTick((function(){t.descEl=t.$refs.desc,t.descEl&&t.descEl.clientHeight>150&&(t.descEl.className+=" overflow")}))},handleBack:function(){history.back()},handleTrack:function(){this.playlistEl.scrollIntoView()},handleItemRoute:function(t){var s=t.id;this.$router.push({name:"songDetail",params:{id:s}})},handleUser:function(t){this.$router.push({name:"userDetail",params:{id:t}})},handlePlay:function(){var t=y[0];this.$store.commit("setPlayer",{url:t._url||"loading",play:!!t._url,index:0,list:y.map((function(t){return t})),lyric:t._lyric||[]})},handlePlaylist:function(t){this.$router.push({name:"playlistDetail",params:{id:t}}),this.init()},fetchComment:function(t){var s=this;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=10;s.current=a,s.$api.playlist.comment(t,(s.current-1)*l,l).then((function(t){200==t.code&&(s.comment=t)}))}}},created:function(){this.init()},mounted:function(){this.ready()}},h=_,v=(a("f753"),a("2877")),b=Object(v["a"])(h,l,i,!1,null,"935aaf64",null);s["default"]=b.exports},f753:function(t,s,a){"use strict";var l=a("8db1"),i=a.n(l);i.a},ffa5:function(t,s,a){"use strict";var l=a("0e81"),i=a.n(l);i.a}}]);